<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
<style>
  body {
    margin: 0;
    background: #111;
    color: #fff;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    text-align: center;
    padding-top: 60px;
  }
  #time {
    font-size: 72px;
    font-weight: 200;
    margin-bottom: 20px;
  }
  #weather {
    font-size: 28px;
    margin-top: 10px;
  }
</style>
</head>
<body>

<div id="time"></div>
<div id="weather">天気を取得中...</div>

<script>
// 時計（iOS12でも動くシンプル版）
function updateTime() {
  var now = new Date();
  var h = ("0" + now.getHours()).slice(-2);
  var m = ("0" + now.getMinutes()).slice(-2);
  document.getElementById("time").textContent = h + ":" + m;
}
setInterval(updateTime, 1000);
updateTime();

// 天気（OpenWeatherMap）
var API_KEY = "669c1ef483ce2b7c3b68ce475259d9a6";  // ←ここにAPIキーを入れる
var CITY = "Kobe,jp";          // ←都市名

function updateWeather() {
  var url = "https://api.openweathermap.org/data/2.5/weather?q=" +
            CITY + "&appid=" + API_KEY + "&units=metric&lang=ja";

  var xhr = new XMLHttpRequest();
  xhr.open("GET", url, true);
  xhr.onload = function() {
    if (xhr.status === 200) {
      var data = JSON.parse(xhr.responseText);
      var temp = Math.round(data.main.temp);
      var desc = data.weather[0].description;
      document.getElementById("weather").textContent =
        temp + "°C / " + desc;
    } else {
      document.getElementById("weather").textContent = "取得失敗";
    }
  };
  xhr.send();
}
updateWeather();
setInterval(updateWeather, 10 * 60 * 1000);
</script>

</body>
</html>
